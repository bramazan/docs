---
title: Hata Kodları
description: API hata kodları ve açıklamaları
---

# Hata Kodları (Error Codes)

Ödeal Payment Infrastructure API tarafından döndürülen hata kodları ve çözüm önerileri.

## Hata Yanıt Formatı

Tüm hatalar aşağıdaki formatta döndürülür:

```json
{
  "errorCode": "INSUFFICIENT_FUNDS",
  "message": "Yetersiz bakiye",
  "detail": "Kartınızda yeterli bakiye bulunmamaktadır. Lütfen başka bir kart deneyin.",
  "correlationId": "abc-123-def-456",
  "timestamp": "2025-12-19T18:30:00Z"
}
```

---

## HTTP Durum Kodları

| Kod | Açıklama | Ne Zaman Kullanılır |
|-----|----------|---------------------|
| `200` | OK | Başarılı istek |
| `201` | Created | Kaynak oluşturuldu |
| `204` | No Content | Başarılı silme |
| `400` | Bad Request | Geçersiz istek parametresi |
| `401` | Unauthorized | Geçersiz veya eksik kimlik doğrulama |
| `403` | Forbidden | Yetki yok |
| `404` | Not Found | Kaynak bulunamadı |
| `409` | Conflict | Çakışan kaynak (örn: duplicate) |
| `422` | Unprocessable Entity | Doğrulama hatası |
| `429` | Too Many Requests | Rate limit aşıldı |
| `500` | Internal Server Error | Sunucu hatası |
| `503` | Service Unavailable | Servis geçici olarak kullanılamıyor |

---

## Ödeme Hataları

### Kart Hataları

| Kod | Açıklama | Çözüm |
|-----|----------|--------|
| `INSUFFICIENT_FUNDS` | Yetersiz bakiye | Müşteriden farklı kart isteyin |
| `INVALID_CARD_NUMBER` | Geçersiz kart numarası | Kart numarasını kontrol edin |
| `INVALID_CVV` | Geçersiz CVV | CVV'yi kontrol edin |
| `EXPIRED_CARD` | Kartın süresi dolmuş | Güncel kart kullanın |
| `CARD_NOT_ACTIVE` | Kart aktif değil | Bankayla iletişime geçin |
| `RESTRICTED_CARD` | Kısıtlanmış kart | Bu kart online işlem yapamaz |
| `LOST_OR_STOLEN_CARD` | Kayıp/çalıntı kart | İşlem reddedildi, farklı kart isteyin |

### Limit Hataları

| Kod | Açıklama | Çözüm |
|-----|----------|--------|
| `LIMIT_EXCEEDED` | İşlem limiti aşıldı | Tutarı azaltın veya bankayla görüşün |
| `DAILY_LIMIT_EXCEEDED` | Günlük limit aşıldı | Yarın tekrar deneyin |
| `MONTHLY_LIMIT_EXCEEDED` | Aylık limit aşıldı | Gelecek ay tekrar deneyin |
| `TRANSACTION_COUNT_LIMIT` | İşlem sayısı limiti | Daha az sıklıkla işlem yapın |

### 3D Secure Hataları

| Kod | Açıklama | Çözüm |
|-----|----------|--------|
| `3DS_FAILED` | 3DS doğrulaması başarısız | Müşteri yanlış OTP girmiş |
| `3DS_TIMEOUT` | 3DS zaman aşımı | İşlemi yeniden başlatın |
| `3DS_CANCELLED` | Müşteri 3DS'i iptal etti | Müşteri işlemi iptal etmiş |
| `3DS_NOT_ENROLLED` | Kart 3DS'e kayıtlı değil | Non-3D ödeme deneyin (risk var) |

### İşlem Hataları

| Kod | Açıklama | Çözüm |
|-----|----------|--------|
| `DUPLICATE_TRANSACTION` | Duplike işlem | Idempotency key kontrolü yapın |
| `TRANSACTION_NOT_FOUND` | İşlem bulunamadı | Transaction ID'yi kontrol edin |
| `INVALID_OPERATION_TYPE` | Geçersiz işlem tipi | `SALE` veya `PRE_AUTH` kullanın |
| `REFUND_AMOUNT_EXCEEDS_ORIGINAL` | İade tutarı orijinalden fazla | İade tutarını azaltın |
| `TRANSACTION_ALREADY_REFUNDED` | İşlem zaten iade edilmiş | Duplike iade |
| `VOID_AFTER_EOD` | Gün sonu sonrası void | Refund kullanın |

---

## Üye İşyeri Hataları

| Kod | Açıklama | Çözüm |
|-----|----------|--------|
| `MERCHANT_NOT_FOUND` | Üye işyeri bulunamadı | Merchant ID'yi kontrol edin |
| `MERCHANT_NOT_ACTIVE` | Üye işyeri aktif değil | Önce aktif hale getirin |
| `INVALID_TAX_ID` | Geçersiz vergi numarası | VKN/TCKN formatını kontrol edin |
| `DUPLICATE_MERCHANT` | Aynı vergi numarasıyla kayıt var | Mevcut kaydı kullanın |
| `INVALID_MCC` | Geçersiz MCC kodu | 4 haneli geçerli MCC girin |
| `INVALID_IBAN` | Geçersiz IBAN | IBAN formatını kontrol edin |

---

## Kimlik Doğrulama Hataları

| Kod | Açıklama | Çözüm |
|-----|----------|--------|
| `INVALID_API_KEY` | Geçersiz API anahtarı | API key'i kontrol edin |
| `API_KEY_EXPIRED` | API anahtarının süresi dolmuş | Yeni key alın |
| `INVALID_SIGNATURE` | Geçersiz HMAC imzası | İmza algoritmasını kontrol edin |
| `UNAUTHORIZED` | Yetkisiz erişim | Doğru credentials kullanın |
| `FORBIDDEN` | İzin yok | Bu kaynağa erişim yetkiniz yok |

---

## Rate Limiting Hataları

| Kod | Açıklama | Çözüm |
|-----|----------|--------|
| `RATE_LIMIT_EXCEEDED` | Rate limit aşıldı | Daha yavaş istek gönderin |
| `DAILY_QUOTA_EXCEEDED` | Günlük kota aşıldı | Yarın tekrar deneyin |

**Rate Limit Header'ları:**
```http
X-RateLimit-Limit: 300
X-RateLimit-Remaining: 0
X-RateLimit-Reset: 1703001600
Retry-After: 60
```

---

## Doğrulama Hataları

| Kod | Açıklama | Örnek |
|-----|----------|-------|
| `VALIDATION_ERROR` | Doğrulama hatası | Genel doğrulama |
| `REQUIRED_FIELD_MISSING` | Zorunlu alan eksik | `amount` alanı gerekli |
| `INVALID_FORMAT` | Geçersiz format | Email formatı hatalı |
| `INVALID_RANGE` | Geçersiz aralık | Tutar 0'dan büyük olmalı |

### Doğrulama Hatası Detayları

```json
{
  "errorCode": "VALIDATION_ERROR",
  "message": "İstek doğrulanamadı",
  "errors": [
    {
      "field": "cardDetails.cardNumber",
      "message": "Kart numarası 16 hane olmalıdır"
    },
    {
      "field": "amount.amount",
      "message": "Tutar 0'dan büyük olmalıdır"
    }
  ]
}
```

---

## Banka Hataları

| Kod | Açıklama | Çözüm |
|-----|----------|--------|
| `BANK_ERROR` | Genel banka hatası | Lütfen tekrar deneyin |
| `BANK_TIMEOUT` | Banka zaman aşımı | İşlemi tekrarlayın |
| `BANK_UNAVAILABLE` | Banka erişilemez | Farklı banka deneyin |
| `INVALID_MERCHANT_CONFIG` | Banka konfigürasyonu hatalı | Destek ile iletişime geçin |

---

## Sistem Hataları

| Kod | Açıklama | Çözüm |
|-----|----------|--------|
| `INTERNAL_ERROR` | İç sunucu hatası | Destek ile iletişime geçin |
| `SERVICE_UNAVAILABLE` | Servis kullanılamı yor | Birkaç dakika bekleyin |
| `DATABASE_ERROR` | Veritabanı hatası | Destek ile iletişime geçin |
| `CONFIGURATION_ERROR` | Yapılandırma hatası | Destek ile iletişime geçin |

---

## Dolandırıcılık Kontrol Hataları

| Kod | Açıklama | Çözüm |
|-----|----------|--------|
| `FRAUD_SUSPECTED` | Dolandırıcılık şüphesi | İşlem reddedildi |
| `HIGH_RISK_TRANSACTION` | Yüksek riskli işlem | Ek doğrulama gerekli |
| `VELOCITY_CHECK_FAILED` | Hız kontrolü başarısız | Çok sık işlem yapılıyor |
| `BLACKLISTED_CARD` | Kart kara listede | Bu kart kullanılamaz |

---

## Hata İşleme Best Practices

<CardGroup cols={2}>
  <Card title="Retry Stratejisi" icon="rotate">
    `5xx` hataları için üstel geri çekilme ile retry yapın
  </Card>
  
  <Card title="Logla" icon="file-lines">
    Tüm hataları `correlationId` ile birlikte loglay ın
  </Card>
  
  <Card title="Kullanıcı Dostu Mesajlar" icon="message">
    Teknik hataları kullanıcıya göstermeyin
  </Card>
  
  <Card title="Monitoring" icon="chart-line">
    Hata oranlarını izleyin ve alert kurun
  </Card>
</CardGroup>

### Retry Örneği

```javascript
async function makePaymentWithRetry(paymentData, maxRetries = 3) {
  for (let attempt = 1; attempt <= maxRetries; attempt++) {
    try {
      const response = await createPayment(paymentData);
      return response;
    } catch (error) {
      // 5xx hatalarıretry    yap
      if (error.status >= 500 && attempt < maxRetries) {
        const delay = Math.pow(2, attempt) * 1000; // Exponential backoff
        await new Promise(resolve => setTimeout(resolve, delay));
        continue;
      }
      
      // 4xx hataları retry yapma
      throw error;
    }
  }
}
```

---

## Destek

Hata ile ilgili destek için:
- Email: support@odeal.com
- Correlation ID'yi paylaşın
- İşlem detaylarını belirtin

<Tip>
Tüm hata yanıtlarında dönen `correlationId` değerini kaydedin. Destek taleplerinizde bu ID'yi paylaşın.
</Tip>
