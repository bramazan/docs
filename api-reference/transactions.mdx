---
title: İşlemler API
description: İşlem sorgulama ve raporlama endpoint'leri
---

# İşlemler API (Transactions API)

Ödeme işlemlerini sorgulama, filtreleme ve raporlama için kullanılan endpoint'ler.

## İşlem Listesi

### `GET /v1/transactions`

Tüm işlemleri filtrelerle birlikte listeler.

```bash
GET /v1/transactions?status=Completed&startDate=2025-12-01&endDate=2025-12-31
Authorization: Bearer API_ANAHTARINIZ
```

#### Query Parametreleri

| Parametre | Tip | Zorunlu | Açıklama |
|-----------|-----|---------|----------|
| `merchantId` | string | Hayır | Belirli bir üye işyerinin işlemleri |
| `status` | string | Hayır | İşlem durumu filtresi |
| `startDate` | date | Hayır | Başlangıç tarihi (ISO 8601) |
| `endDate` | date | Hayır | Bitiş tarihi (ISO 8601) |
| `minAmount` | decimal | Hayır | Minimum tutar |
| `maxAmount` | decimal | Hayır | Maksimum tutar |
| `currency` | string | Hayır | Para birimi (TRY, USD, EUR) |
| `page` | integer | Hayır | Sayfa numarası (varsayılan: 1) |
| `pageSize` | integer | Hayır | Sayfa başına kayıt (varsayılan: 50, maks: 100) |

#### Yanıt

```json
{
  "data": [
    {
      "transactionId": "550e8400-e29b-41d4-a716-446655440000",
      "merchantId": "mrc_abc123",
      "status": "Completed",
      "amount": {
        "amount": 100.00,
        "currency": "TRY"
      },
      "cardDetails": {
        "maskedCardNumber": "540061******4581",
        "cardBrand": "Mastercard"
      },
      "createdAt": "2025-12-19T18:30:00Z",
      "completedAt": "2025-12-19T18:30:05Z"
    }
  ],
  "pagination": {
    "page": 1,
    "pageSize": 50,
    "totalRecords": 150,
    "totalPages": 3
  }
}
```

---

## İşlem Detayı

### `GET /v1/transactions/{id}`

Belirli bir işlemin detaylarını getirir.

```bash
GET /v1/transactions/550e8400-e29b-41d4-a716-446655440000
Authorization: Bearer API_ANAHTARINIZ
```

#### Yanıt

```json
{
  "transactionId": "550e8400-e29b-41d4-a716-446655440000",
  "merchantId": "mrc_abc123",
  "status": "Completed",
  "amount": {
    "amount": 100.00,
    "currency": "TRY"
  },
  "cardDetails": {
    "maskedCardNumber": "540061******4581",
    "cardBrand": "Mastercard",
    "cardType": "Credit",
    "issuerBank": "Garanti Bankası"
  },
  "authCode": "123456",
  "rrn": "000123456789",
  "installments": 1,
  "threeDSecure": {
    "verified": false,
    "eci": null
  },
  "metadata": {
    "orderId": "ORDER-12345",
    "customerEmail": "musteri@example.com"
  },
  "createdAt": "2025-12-19T18:30:00Z",
  "completedAt": "2025-12-19T18:30:05Z"
}
```

---

## İşlem İstatistikleri

### `GET /v1/transactions/stats`

Belirli bir tarih aralığındaki işlem istatistiklerini getirir.

```bash
GET /v1/transactions/stats?startDate=2025-12-01&endDate=2025-12-31
Authorization: Bearer API_ANAHTARINIZ
```

#### Yanıt

```json
{
  "totalTransactions": 1250,
  "successfulTransactions": 1175,
  "failedTransactions": 75,
  "successRate": 94.0,
  "totalVolume": {
    "TRY": 125000.00,
    "USD": 3500.00,
    "EUR": 2100.00
  },
  "averageTicketSize": {
    "TRY": 100.00
  },
  "byStatus": {
    "Completed": 1175,
    "Failed": 75
  },
  "byPaymentMethod": {
    "CreditCard": 1000,
    "DebitCard": 250
  }
}
```

---

## İşlem Dışa Aktarma

### `POST /v1/transactions/export`

İşlemleri CSV veya Excel formatında dışa aktarır.

```bash
POST /v1/transactions/export
Authorization: Bearer API_ANAHTARINIZ
Content-Type: application/json
```

#### İstek Gövdesi

```json
{
  "format": "csv",
  "filters": {
    "startDate": "2025-12-01",
    "endDate": "2025-12-31",
    "status": "Completed"
  },
  "columns": [
    "transactionId",
    "merchantId",
    "amount",
    "status",
    "createdAt"
  ]
}
```

#### Yanıt

```json
{
  "exportId": "exp_xyz789",
  "status": "Processing",
  "estimatedCompletionTime": "2025-12-19T19:05:00Z"
}
```

<Note>
Büyük veri setleri için dışa aktrma asenkron olarak işlenir. Tamamlandığında webhook ile bildirim gönderilir.
</Note>

---

## Durum Filtreleri

| Durum | Açıklama |
|-------|----------|
| `All` | Tüm işlemler |
| `Completed` | Tamamlanan |
| `Failed` | Başarısız |
| `Refunded` | İade edilmiş |
| `Voided` | İptal edilmiş |
| `Processing` | İşleniyor |

---

## Export Formatları

| Format | Açıklama | Maksimum Kayıt |
|--------|----------|----------------|
| `csv` | Comma-separated values | 100,000 |
| `excel` | Microsoft Excel (.xlsx) | 100,000 |
| `json` | JSON formatı | 10,000 |

---

## İlgili Kaynaklar

- [Ödeme API](/api-reference/payments)
- [Raporlama](/features/reporting)
- [Webhook'lar](/api-reference/webhooks)
