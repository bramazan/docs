---
title: E-Commerce Integration
description: Complete guide to integrating Ödeal payments into your e-commerce platform
icon: 'shopping-cart'
---

# E-Commerce Integration Guide

Build a seamless checkout experience for your online store with Ödeal Payment Infrastructure. This guide covers everything from basic payment acceptance to advanced features like 3D Secure and multi-currency support.

## Overview

E-commerce businesses need reliable, fast, and secure payment processing. Ödeal provides:

<CardGroup cols={2}>
  <Card title="Fast Checkout" icon="bolt">
    Optimized payment flows that reduce cart abandonment
  </Card>
  <Card title="Security First" icon="shield">
    PCI DSS Level 1 compliant with 3D Secure support
  </Card>
  <Card title="Multi-Currency" icon="globe">
    Accept payments in TRY, USD, and EUR
  </Card>
  <Card title="Mobile Optimized" icon="mobile">
    Responsive payment forms for all devices
  </Card>
</CardGroup>

## Quick Start

### 1. Create a Payment Intent

Start by creating a payment intent for your customer's cart:

<CodeGroup>

```javascript JavaScript
const response = await fetch('https://api.odeal.com/v1/payments', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json',
    'X-Idempotency-Key': generateIdempotencyKey()
  },
  body: JSON.stringify({
    merchantId: 'your-merchant-id',
    amount: 150.00,
    currency: 'TRY',
    orderId: 'order-12345',
    customerEmail: 'customer@example.com',
    description: 'Order #12345 - Winter Jacket'
  })
});

const payment = await response.json();
```

```python Python
import requests

response = requests.post(
    'https://api.odeal.com/v1/payments',
    headers={
        'Authorization': 'Bearer YOUR_API_KEY',
        'Content-Type': 'application/json',
        'X-Idempotency-Key': generate_idempotency_key()
    },
    json={
        'merchantId': 'your-merchant-id',
        'amount': 150.00,
        'currency': 'TRY',
        'orderId': 'order-12345',
        'customerEmail': 'customer@example.com',
        'description': 'Order #12345 - Winter Jacket'
    }
)

payment = response.json()
```

```php PHP
<?php
$client = new GuzzleHttp\Client();

$response = $client->post('https://api.odeal.com/v1/payments', [
    'headers' => [
        'Authorization' => 'Bearer YOUR_API_KEY',
        'Content-Type' => 'application/json',
        'X-Idempotency-Key' => generateIdempotencyKey()
    ],
    'json' => [
        'merchantId' => 'your-merchant-id',
        'amount' => 150.00,
        'currency' => 'TRY',
        'orderId' => 'order-12345',
        'customerEmail' => 'customer@example.com',
        'description' => 'Order #12345 - Winter Jacket'
    ]
]);

$payment = json_decode($response->getBody());
?>
```

```csharp C#
var client = new HttpClient();
client.DefaultRequestHeaders.Authorization = 
    new AuthenticationHeaderValue("Bearer", "YOUR_API_KEY");

var request = new
{
    merchantId = "your-merchant-id",
    amount = 150.00,
    currency = "TRY",
    orderId = "order-12345",
    customerEmail = "customer@example.com",
    description = "Order #12345 - Winter Jacket"
};

var response = await client.PostAsJsonAsync(
    "https://api.odeal.com/v1/payments",
    request
);

var payment = await response.Content.ReadFromJsonAsync<Payment>();
```

</CodeGroup>

### 2. Process Card Payment

Collect card details securely and process the payment:

```javascript
// Process payment with card details
const result = await fetch(`https://api.odeal.com/v1/payments/${payment.id}/process`, {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    card: {
      number: '4111111111111111',
      holderName: 'John Doe',
      expiryMonth: '12',
      expiryYear: '2025',
      cvv: '123'
    },
    billingAddress: {
      country: 'TR',
      city: 'Istanbul',
      postalCode: '34000',
      line1: 'Main Street 123'
    }
  })
});

const processedPayment = await result.json();

if (processedPayment.status === 'SUCCEEDED') {
  // Payment successful - fulfill order
  console.log('Payment completed:', processedPayment.transactionId);
} else if (processedPayment.status === 'REQUIRES_3DS') {
  // Redirect to 3D Secure page
  window.location.href = processedPayment.threeDSecureUrl;
}
```

### 3. Handle 3D Secure

For enhanced security, handle 3D Secure authentication:

```javascript
// After customer completes 3DS, verify the result
const verified = await fetch(`https://api.odeal.com/v1/payments/${payment.id}/verify-3ds`, {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    threeDSecureResult: callbackParams.threeDSecureResult
  })
});

const finalPayment = await verified.json();

if (finalPayment.status === 'SUCCEEDED') {
  // Show success page
  redirectToSuccessPage(finalPayment.transactionId);
}
```

## Advanced Features

### Installments

Offer flexible installment options to increase conversion:

```javascript
const paymentWithInstallments = await fetch('https://api.odeal.com/v1/payments', {
  method: 'POST',
  headers: {
    'Authorization': 'Bearer YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    merchantId: 'your-merchant-id',
    amount: 1500.00,
    currency: 'TRY',
    orderId: 'order-67890',
    installments: 6, // 6 monthly payments
    description: 'Premium Product Order'
  })
});
```

### Multi-Currency Checkout

Let international customers pay in their preferred currency:

```javascript
// Detect customer location and offer currency choice
const customerCurrency = detectCustomerCurrency(); // 'USD', 'EUR', 'TRY'

const payment = await createPayment({
  amount: 100.00,
  currency: customerCurrency,
  enableDCC: true // Enable Dynamic Currency Conversion
});
```

### Save Card for Future Use

Enable one-click checkout for returning customers:

```javascript
const payment = await createPayment({
  merchantId: 'your-merchant-id',
  amount: 75.00,
  currency: 'TRY',
  customerId: 'customer-abc123',
  saveCard: true, // Save card for future payments
  description: 'Subscription Payment'
});
```

## Webhook Integration

Listen for payment events to update order status:

```javascript
app.post('/webhooks/odeal', async (req, res) => {
  const event = req.body;
  
  // Verify webhook signature
  const signature = req.headers['x-odeal-signature'];
  if (!verifyWebhookSignature(event, signature)) {
    return res.status(401).send('Invalid signature');
  }
  
  switch (event.type) {
    case 'payment.succeeded':
      await fulfillOrder(event.data.orderId);
      break;
      
    case 'payment.failed':
      await notifyCustomer(event.data.customerId, 'payment_failed');
      break;
      
    case 'refund.completed':
      await updateOrderStatus(event.data.orderId, 'refunded');
      break;
  }
  
  res.status(200).send('OK');
});
```

## Error Handling

Implement robust error handling for better UX:

```javascript
try {
  const payment = await processPayment(cardDetails);
  
  if (payment.status === 'SUCCEEDED') {
    showSuccessMessage();
  }
} catch (error) {
  switch (error.code) {
    case 'INSUFFICIENT_FUNDS':
      showError('Your card has insufficient funds');
      break;
      
    case 'CARD_DECLINED':
      showError('Your card was declined. Please try another card.');
      break;
      
    case 'EXPIRED_CARD':
      showError('This card has expired');
      break;
      
    case 'INVALID_CVV':
      showError('Invalid CVV code');
      break;
      
    default:
      showError('Payment failed. Please try again.');
  }
}
```

## Best Practices

<AccordionGroup>
  <Accordion title="Use Idempotency Keys">
    Always include an idempotency key to prevent duplicate charges if the request is retried:
    
    ```javascript
    const idempotencyKey = `${orderId}-${timestamp}-${randomString()}`;
    ```
  </Accordion>
  
  <Accordion title="Implement Retry Logic">
    Add exponential backoff for failed API calls:
    
    ```javascript
    async function createPaymentWithRetry(data, maxRetries = 3) {
      for (let i = 0; i < maxRetries; i++) {
        try {
          return await createPayment(data);
        } catch (error) {
          if (i === maxRetries - 1) throw error;
          await sleep(Math.pow(2, i) * 1000);
        }
      }
    }
    ```
  </Accordion>
  
  <Accordion title="Validate Before Submitting">
    Validate card details client-side before API call:
    
    ```javascript
    function validateCard(card) {
      if (!luhnCheck(card.number)) return false;
      if (card.expiryYear < currentYear) return false;
      if (card.cvv.length < 3) return false;
      return true;
    }
    ```
  </Accordion>
  
  <Accordion title="Show Clear Loading States">
    Provide feedback during payment processing:
    
    ```javascript
    showLoadingIndicator('Processing your payment...');
    await processPayment(cardDetails);
    hideLoadingIndicator();
    ```
  </Accordion>
</AccordionGroup>

## Testing

Use test card numbers in development:

| Card Number | Scenario | Expected Result |
|-------------|----------|-----------------|
| 4111111111111111 | Success | Payment succeeds |
| 4000000000000002 | Declined | Card declined error |
| 4000000000000069 | Expired | Expired card error |
| 4000000000000127 | Insufficient Funds | Insufficient funds error |

## Next Steps

<CardGroup cols={2}>
  <Card title="3D Secure Integration" icon="shield-check" href="/features/3ds-integration">
    Add enhanced security with 3D Secure
  </Card>
  <Card title="Webhook Guide" icon="webhook" href="/guides/webhooks">
    Set up webhook notifications
  </Card>
  <Card title="API Reference" icon="code" href="/api-reference/payments">
    Explore all payment endpoints
  </Card>
  <Card title="Testing Guide" icon="flask" href="/guides/testing">
    Learn how to test integrations
  </Card>
</CardGroup>
